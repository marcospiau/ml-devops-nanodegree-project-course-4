schema: '2.0'
stages:
  fix_spaces:
    cmd: sed 's/, /,/g' data/raw/census.csv > data/processed/census-fix-spaces.csv
    deps:
    - path: data/raw/census.csv
      md5: 145de00f6e6053d3f7044628f9a5b5ff
      size: 3974474
    outs:
    - path: data/processed/census-fix-spaces.csv
      md5: 12c208530a5680c15ae19b34152286dd
      size: 3518606
  remove_dups:
    cmd: awk '{counts[$0]++;if (counts[$0] == 1) {print $0}}' data/processed/census-fix-spaces.csv
      > data/processed/census-fix-spaces-nodups.csv
    deps:
    - path: data/processed/census-fix-spaces.csv
      md5: 12c208530a5680c15ae19b34152286dd
      size: 3518606
    outs:
    - path: data/processed/census-fix-spaces-nodups.csv
      md5: 23c4db7107d7efeb08e467e1405d3234
      size: 3515984
  train_eval_model:
    cmd: python3 starter/train_model.py
    deps:
    - path: data/processed/census-fix-spaces-nodups.csv
      md5: 23c4db7107d7efeb08e467e1405d3234
      size: 3515984
    - path: starter/train_model.py
      md5: 177e05bb7f73b0649d3e79a11248a3d0
      size: 4841
    outs:
    - path: data/train_test_data/X_test.joblib
      md5: 4c1da77118a10cc4d45246df2358917a
      size: 5623098
    - path: data/train_test_data/X_train.joblib
      md5: 41a3cfabb33e2820a2f0c8e26e5d82f2
      size: 22489242
    - path: model/encoder.joblib
      md5: a553f204feb7d25cff7013915fd7ce8a
      size: 3898
    - path: model/lb.joblib
      md5: 68d67643c2f11e180eaa335146ade2ea
      size: 403
    - path: model/model.joblib
      md5: 0a26644e6b59070dbaa5a5d42ae909af
      size: 7850
    - path: model/slice_metrics.txt
      md5: 82cb77b16f61352f6a0f93bf04f9ba8a
      size: 9373
    - path: model/summary.json
      md5: 2148d2f499236252a35d84b3b17b559d
      size: 269
